<Window x:Class="EditorApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
		xmlns:engine="clr-namespace:EditorPlugin;assembly=EditorPlugin"
		xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"
        Title="Engine Editor" Height="1000" Width="1920" WindowStartupLocation="CenterScreen">
	<Window.Resources>
		<ResourceDictionary>
			<XmlDataProvider x:Key="ControlsLanguageVersion" Source="/Language/Polish.xml" XPath="Language/MainWindow"/>
			<ResourceDictionary.MergedDictionaries>
				<ResourceDictionary Source="/Styles/BlueStyle/MainWindowStyles.xaml"/>
			</ResourceDictionary.MergedDictionaries>
		</ResourceDictionary>

	</Window.Resources>

	<Window.Background>
		<RadialGradientBrush>
			<GradientStop Color="#FF8AB2F9" Offset="0.089"/>
			<GradientStop Color="#FF2E4264" Offset="1"/>
		</RadialGradientBrush>
	</Window.Background>
	<Grid>
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="Auto"/>
		</Grid.RowDefinitions>

		<!--Main menu-->
		<Menu Name="MainMenu" Style="{StaticResource MenuStyle}" Grid.Row="0" HorizontalAlignment="Left" VerticalAlignment="Top" Height="Auto" Width="Auto" >
			<MenuItem>
				<MenuItem.Header>
					<AccessText Text="{Binding Source={StaticResource ControlsLanguageVersion}, XPath=MainMenu/ItemFile/@Name}"/>
				</MenuItem.Header>

				<!--Subitems-->
				<MenuItem Style="{StaticResource MenuItemStyle}">
					<MenuItem.Header>
						<AccessText Text="{Binding Source={StaticResource ControlsLanguageVersion}, XPath=MainMenu/ItemFile/ItemNewProject/@Name}"/>
					</MenuItem.Header>
				</MenuItem>
				<MenuItem Style="{StaticResource MenuItemStyle}">
					<MenuItem.Header>
						<AccessText Text="{Binding Source={StaticResource ControlsLanguageVersion}, XPath=MainMenu/ItemFile/ItemOpenProject/@Name}"/>
					</MenuItem.Header>
				</MenuItem>
				<MenuItem Style="{StaticResource MenuItemStyle}" Click="SaveClick" >
					<MenuItem.Header>
						<AccessText Text="{Binding Source={StaticResource ControlsLanguageVersion}, XPath=MainMenu/ItemFile/ItemSaveProject/@Name}"/>
					</MenuItem.Header>
				</MenuItem>
				<MenuItem Style="{StaticResource MenuItemStyle}">
					<MenuItem.Header>
						<AccessText Text="{Binding Source={StaticResource ControlsLanguageVersion}, XPath=MainMenu/ItemFile/ItemExit/@Name}"/>
					</MenuItem.Header>
				</MenuItem>
			</MenuItem>
		</Menu>

		<Grid Grid.Row="1" Height="Auto">
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="447"/>
				<ColumnDefinition Width="Auto"/>
				<ColumnDefinition Width="Auto"  MinWidth="1000"/>
				<ColumnDefinition Width="Auto"/>
			</Grid.ColumnDefinitions>

			<Grid Grid.Column="0" Height="Auto" Width="Auto" HorizontalAlignment="Left"/>

			<GridSplitter Grid.Column="1" Grid.ColumnSpan="1" Width="2" ResizeDirection="Columns" HorizontalAlignment="Left" Style="{StaticResource GridSplitterStyle}" ></GridSplitter>

			<Grid Grid.Column="2" Grid.ColumnSpan="1" Height="Auto" >
				<Image x:Name="EngineViewport" Height="800" Width="1000" Margin="2" HorizontalAlignment="Left" VerticalAlignment="Top" />
			</Grid>

			<Grid Grid.Column="3" Height="Auto" >
				<Grid.RowDefinitions>
					<RowDefinition Height="390" ></RowDefinition>
					<RowDefinition Height="5" ></RowDefinition>
					<RowDefinition Height="Auto" ></RowDefinition>
				</Grid.RowDefinitions>

				<Grid Grid.Row="0" >
					<ListView x:Name="ActorList" HorizontalAlignment="Stretch" Height="Auto" Margin="10,10,10,10" VerticalAlignment="Stretch" Width="Auto" ItemsSource="{Binding}" Background="Transparent" BorderThickness="2" ScrollViewer.VerticalScrollBarVisibility="Visible" SelectionChanged="ActorSelectionChanged" SelectionMode="Single" >
						<ListView.View>
							<GridView>
								<GridView.ColumnHeaderContainerStyle>
									<Style>
										<Setter Property="FrameworkElement.Visibility" Value="Collapsed"/>
									</Style>
								</GridView.ColumnHeaderContainerStyle>
								<GridViewColumn Header="Name" Width="Auto" >
									<GridViewColumn.CellTemplate>
										<DataTemplate>
											<TextBlock Text="{Binding ActorName}" Style="{StaticResource TextBlockStyle}" />
										</DataTemplate>
									</GridViewColumn.CellTemplate>
								</GridViewColumn>
							</GridView>
						</ListView.View>
					</ListView>
				</Grid>
				
				<GridSplitter Grid.Row="1" Height="2" Width="400" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" ResizeDirection="Rows" Style="{StaticResource GridSplitterStyle}"/>

				<Grid Grid.Row="2" >
					<ListView x:Name="ActorPreview" HorizontalAlignment="Stretch" Height="509" Margin="10, 10, 10, 10" VerticalAlignment="Stretch" Width="400" ItemsSource="{Binding Properties}" Background="Transparent" BorderThickness="2">
						<ListView.ItemContainerStyle>
							<Style TargetType="{x:Type ListViewItem}">
								<Setter Property="Focusable" Value="False"/>
								<Style.Triggers>
									<Trigger Property="IsSelected" Value="True">
										<Setter Property="Background" Value="{x:Null}" />
										<Setter Property="BorderBrush" Value="{x:Null}" />
									</Trigger>
								</Style.Triggers>
							</Style>
						</ListView.ItemContainerStyle>
						<ListView.Resources>
							<HierarchicalDataTemplate x:Key="ObjectPropertyDataTemplate" DataType="{x:Type engine:ObjectPropertyWrapper}" ItemsSource="{Binding Properties}" >
								<Expander IsExpanded="True" >
									<Expander.Header>
										<BulletDecorator>
											<TextBlock Text="{Binding PropertyName}" Style="{StaticResource TextBlockStyle}" FontWeight="Bold" FontSize="12" />
										</BulletDecorator>
									</Expander.Header>
									<ItemsControl ItemsSource="{Binding Properties}" Margin="0, 5, 0, 0"/>
								</Expander>
							</HierarchicalDataTemplate>
							<HierarchicalDataTemplate DataType="{x:Type engine:CategoryPropertyWrapper}" ItemsSource="{Binding Properties}" >
								<Expander IsExpanded="True">
									<Expander.Header>
										<BulletDecorator>
											<TextBlock Text="{Binding PropertyName}" Style="{StaticResource TextBlockStyle}" FontWeight="Bold" FontSize="15" />
										</BulletDecorator>
									</Expander.Header>
									<ItemsControl ItemsSource="{Binding Properties}" Margin="0, 5, 0, 0"/>
								</Expander>
							</HierarchicalDataTemplate>
							<HierarchicalDataTemplate DataType="{x:Type engine:XMFloatPropertyWrapper}" ItemsSource="{Binding Properties}" >
								<StackPanel Margin="20, 5, 0, 5">
									<TextBlock Text="{Binding PropertyName}" Style="{StaticResource TextBlockStyle}" FontWeight="Bold" FontSize="12" />
									<ItemsControl ItemsSource="{Binding Properties}" />
								</StackPanel>
							</HierarchicalDataTemplate>
							<DataTemplate DataType="{x:Type engine:FloatPropertyWrapper}">
								<StackPanel Orientation="Horizontal" Margin="20, 0, 0, 0">
									<TextBlock Width="50" Text="{Binding PropertyName}" Style="{StaticResource TextBlockStyle}"/>
									<xctk:DoubleUpDown Width="85" FormatString="F7" Increment="0.001" Value="{Binding Value}" />
								</StackPanel>
							</DataTemplate>
							<DataTemplate DataType="{x:Type engine:IntPropertyWrapper}">
								<StackPanel Orientation="Horizontal" Margin="20, 0, 0, 0">
									<TextBlock Width="50" Text="{Binding PropertyName}" Style="{StaticResource TextBlockStyle}"/>
									<xctk:IntegerUpDown Width="85" Value="{Binding Value}"/>
								</StackPanel>
							</DataTemplate>
							<DataTemplate DataType="{x:Type engine:BoolPropertyWrapper}">
								<StackPanel Orientation="Horizontal" Margin="20, 0, 0, 0">
									<TextBlock Width="50" Text="{Binding PropertyName}" Style="{StaticResource TextBlockStyle}"/>
									<CheckBox IsChecked="{Binding Value}" />
								</StackPanel>
							</DataTemplate>
						</ListView.Resources>
					</ListView>
					<!--<TreeView x:Name="ActorPreview" HorizontalAlignment="Stretch" Height="509" Margin="10, 10, 10, 10" VerticalAlignment="Stretch" Width="400" ItemsSource="{Binding Properties}" Background="Transparent" BorderThickness="2">
						<TreeView.ItemContainerStyle>
							<Style TargetType="{x:Type TreeViewItem}">
								<Setter Property="IsExpanded" Value="True" />
							</Style>
						</TreeView.ItemContainerStyle>
						<TreeView.Resources>
							<HierarchicalDataTemplate DataType="{x:Type engine:ObjectPropertyWrapper}" ItemsSource="{Binding Properties}" >
								<TextBlock Text="{Binding PropertyName}" Style="{StaticResource TextBlockStyle}"/>
							</HierarchicalDataTemplate>
							<HierarchicalDataTemplate DataType="{x:Type engine:CategoryPropertyWrapper}" ItemsSource="{Binding Properties}" >
								<TextBlock Text="{Binding PropertyName}" Style="{StaticResource TextBlockStyle}"/>
							</HierarchicalDataTemplate>
							<DataTemplate DataType="{x:Type engine:FloatPropertyWrapper}">
								<StackPanel Orientation="Horizontal">
									<TextBlock Width="50" Text="{Binding PropertyName}" Style="{StaticResource TextBlockStyle}"/>
									<xctk:DoubleUpDown Width="85" FormatString="F7" Increment="0.001" Value="{Binding Value}" />
								</StackPanel>
							</DataTemplate>
							<DataTemplate DataType="{x:Type engine:IntPropertyWrapper}">
								<StackPanel Orientation="Horizontal" >
									<TextBlock Width="50" Text="{Binding PropertyName}" Style="{StaticResource TextBlockStyle}"/>
									<xctk:IntegerUpDown Width="85" Value="{Binding Value}"/>
								</StackPanel>
							</DataTemplate>
							<DataTemplate DataType="{x:Type engine:BoolPropertyWrapper}">
								<StackPanel Orientation="Horizontal">
									<TextBlock Width="50" Text="{Binding PropertyName}" Style="{StaticResource TextBlockStyle}"/>
									<CheckBox IsChecked="{Binding Value}" />
								</StackPanel>
							</DataTemplate>
						</TreeView.Resources>
					</TreeView>-->
				</Grid>
			</Grid>

		</Grid>

	</Grid>
</Window>
