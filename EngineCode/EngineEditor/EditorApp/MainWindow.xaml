<Window x:Class="EditorApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
		xmlns:engine="clr-namespace:EditorPlugin;assembly=EditorPlugin"
		xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"
        Title="Engine Editor" Height="1000" Width="1920" WindowStartupLocation="CenterScreen">
	<Window.Resources>
		<ResourceDictionary>
			<XmlDataProvider x:Key="ControlsLanguageVersion" Source="/Language/Polish.xml" XPath="Language/MainWindow"/>
			<ResourceDictionary.MergedDictionaries>
				<ResourceDictionary Source="/Styles/BlueStyle/MainWindowStyles.xaml"/>
			</ResourceDictionary.MergedDictionaries>
		</ResourceDictionary>

	</Window.Resources>

	<Window.Background>
		<RadialGradientBrush>
			<GradientStop Color="#FF8AB2F9" Offset="0.089"/>
			<GradientStop Color="#FF2E4264" Offset="1"/>
		</RadialGradientBrush>
	</Window.Background>
	<Grid>
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="Auto"/>
		</Grid.RowDefinitions>

		<!--Main menu-->
		<Menu Name="MainMenu" Style="{StaticResource MenuStyle}" Grid.Row="0" HorizontalAlignment="Left" VerticalAlignment="Top" Height="Auto" Width="Auto" >
			<MenuItem>
				<MenuItem.Header>
					<AccessText Text="{Binding Source={StaticResource ControlsLanguageVersion}, XPath=MainMenu/ItemFile/@Name}"/>
				</MenuItem.Header>

				<!--Subitems-->
				<MenuItem Style="{StaticResource MenuItemStyle}">
					<MenuItem.Header>
						<AccessText Text="{Binding Source={StaticResource ControlsLanguageVersion}, XPath=MainMenu/ItemFile/ItemNewProject/@Name}"/>
					</MenuItem.Header>
				</MenuItem>
				<MenuItem Style="{StaticResource MenuItemStyle}" Click="LoadClick">
					<MenuItem.Header>
						<AccessText Text="{Binding Source={StaticResource ControlsLanguageVersion}, XPath=MainMenu/ItemFile/ItemOpenProject/@Name}"/>
					</MenuItem.Header>
				</MenuItem>
				<MenuItem Style="{StaticResource MenuItemStyle}" Click="SaveClick" >
					<MenuItem.Header>
						<AccessText Text="{Binding Source={StaticResource ControlsLanguageVersion}, XPath=MainMenu/ItemFile/ItemSaveProject/@Name}"/>
					</MenuItem.Header>
				</MenuItem>
				<MenuItem Style="{StaticResource MenuItemStyle}">
					<MenuItem.Header>
						<AccessText Text="{Binding Source={StaticResource ControlsLanguageVersion}, XPath=MainMenu/ItemFile/ItemExit/@Name}"/>
					</MenuItem.Header>
				</MenuItem>
			</MenuItem>
		</Menu>

		<Grid Grid.Row="1" Height="Auto">
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="447"/>
				<ColumnDefinition Width="Auto"/>
				<ColumnDefinition Width="Auto"  MinWidth="1000"/>
				<ColumnDefinition Width="Auto"/>
				<ColumnDefinition Width="Auto"/>
			</Grid.ColumnDefinitions>

			<Grid Grid.Column="0" Height="Auto" Width="Auto" HorizontalAlignment="Left"/>

			<GridSplitter Grid.Column="1" Grid.ColumnSpan="1" Width="2" Style="{StaticResource HorizontalGridSplitterStyle}" ></GridSplitter>

			<Grid Grid.Column="2" Grid.ColumnSpan="1" Height="Auto" >
				<Image x:Name="EngineViewport" Height="800" Width="1000" Margin="2" HorizontalAlignment="Left" VerticalAlignment="Top" Focusable="True" MouseLeave="EngineViewportLostFocus" MouseEnter="EngineViewportGotFocus" />
			</Grid>

			<GridSplitter Grid.Column="3" Grid.ColumnSpan="1" Width="2" Style="{StaticResource HorizontalGridSplitterStyle}" ></GridSplitter>
			
			<Grid Grid.Column="4" Height="Auto" >
				<Grid.RowDefinitions>
					<RowDefinition Height="390" ></RowDefinition>
					<RowDefinition Height="5" ></RowDefinition>
					<RowDefinition Height="Auto" ></RowDefinition>
				</Grid.RowDefinitions>

				<Grid Grid.Row="0" >
					<ListView x:Name="ActorList" HorizontalAlignment="Stretch" Height="Auto" Margin="10,10,10,10" VerticalAlignment="Stretch" Width="Auto" ItemsSource="{Binding}" Background="Transparent" BorderThickness="2" ScrollViewer.VerticalScrollBarVisibility="Visible" SelectionChanged="ActorSelectionChanged" SelectionMode="Single" >
						<ListView.View>
							<GridView>
								<GridView.ColumnHeaderContainerStyle>
									<Style>
										<Setter Property="FrameworkElement.Visibility" Value="Collapsed"/>
									</Style>
								</GridView.ColumnHeaderContainerStyle>
								<GridViewColumn Header="Name" Width="Auto" >
									<GridViewColumn.CellTemplate>
										<DataTemplate>
											<TextBlock Text="{Binding ActorName}" Style="{StaticResource TextBlockStyle}" />
										</DataTemplate>
									</GridViewColumn.CellTemplate>
								</GridViewColumn>
							</GridView>
						</ListView.View>
					</ListView>
				</Grid>
				
				<GridSplitter Grid.Row="1" Height="2" Width="400" Style="{StaticResource VerticalGridSplitterStyle}"/>

				<Grid Grid.Row="2" >
					<ListView x:Name="ActorPreview" Height="509" Width="400" Style="{StaticResource ActorListViewStyle}" >
						<ListView.Resources>
							<CollectionViewSource x:Key="PropertiesCollection" Source="{Binding Properties}" />
							<x:Array x:Key="ActorInfoCollectionItem" Type="ListViewItem" >
								<ListViewItem ContentTemplate="{Binding}" Content="{Binding Actor}"/>
							</x:Array>
							<CollectionViewSource x:Key="ActorInfoCollection" Source="{StaticResource ActorInfoCollectionItem}" />
						</ListView.Resources>
						<ListView.ItemsSource>
							<CompositeCollection>
								<CollectionContainer Collection="{Binding Source={StaticResource ActorInfoCollection}}"/>
								<CollectionContainer Collection="{Binding Source={StaticResource PropertiesCollection}}"/>
							</CompositeCollection>
						</ListView.ItemsSource>
					</ListView>
				</Grid>
			</Grid>

		</Grid>

	</Grid>
</Window>
